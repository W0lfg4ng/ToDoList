function showTask() {
  var tasks = insertTask();
  var html = '<ul>';
  for(var i=0; i<tasks.length; i++) {
    html += '<li>' + tasks[i] + '<button class="remove" id="' + i  + '">X</button></li>';
  };
  html += '</ul>';
  document.getElementById('tasks').innerHTML = html;
  var remove = document.getElementsByClassName('remove');
  for (var i=0; i < remove.length; i++) {
    remove[i].addEventListener('click', removeTask);
  };
}

function insertTask() {
  var tasks = new Array;
  var tasks_str = localStorage.getItem('todo');
  if (tasks_str !== null) {
    tasks = JSON.parse(tasks_str); 
  }
  return tasks;
}
 
function addTask() {
  var task = document.getElementById('newTask').value;
  var tasks = insertTask();
    tasks.push(task);
    localStorage.setItem('todo', JSON.stringify(tasks));
    showTask();
    return false;
}
 
function removeTask() {
  var id = this.getAttribute('id');
  var tasks = insertTask();
  tasks.splice(id, 1);
  localStorage.setItem('todo', JSON.stringify(tasks));
  showTask();
  return false;
}

document.getElementById('add').addEventListener('click', addTask);
showTask();